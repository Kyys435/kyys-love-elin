<!doctype html>  
<html lang="id">  
<head>  
<meta charset="utf-8" />  
<meta name="viewport" content="width=device-width,initial-scale=1" />  
<title>KYYS ü§ç ELIN ‚Äî HD-in 4K</title>  
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">  
<style>  
:root{--bg1:#08061a;--bg2:#1a0f3b;--accent:#a783ff;--accent2:#c7b3ff;--muted:rgba(230,238,251,0.6)}  
*{box-sizing:border-box;margin:0;padding:0}  
body{height:100%;font-family:'Orbitron',sans-serif;color:#e7f2ff;background:radial-gradient(circle at 50% 20%,#1a0f3b 0%,#08061a 100%);display:flex;flex-direction:column;align-items:center;min-height:100vh;overflow-x:hidden}  
.intro{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:radial-gradient(circle at center,#1a0f3b,#08061a);z-index:9999;color:white;font-size:2.5rem;letter-spacing:4px;opacity:1;transition:opacity 2s ease, transform 2s ease;text-shadow:0 0 15px rgba(255,255,255,0.6),0 0 35px var(--accent);font-weight:700;animation:glowPulse 3s infinite alternate}  
@keyframes glowPulse{from{text-shadow:0 0 10px var(--accent2),0 0 30px var(--accent)}to{text-shadow:0 0 25px white,0 0 45px var(--accent2)}}  
.intro.hide{opacity:0;transform:scale(1.1);pointer-events:none;transition:opacity 1.5s ease,transform 1.5s ease}  
.container{width:95%;max-width:820px;margin-top:20px;text-align:center}  
.topbar{height:56px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.04);border-radius:10px;color:var(--accent);letter-spacing:2px;font-size:20px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}  
.card{background:rgba(0,0,0,0.3);border-radius:16px;padding:20px;margin-top:20px;box-shadow:0 10px 40px rgba(4,6,30,0.6)}  
.label{font-weight:600;color:var(--muted);margin:10px 0}  
.input-url{width:100%;padding:12px;border-radius:10px;background:rgba(0,0,0,0.35);border:1px solid rgba(255,255,255,0.03);color:#dfe9ff;font-size:14px}  
.upload-row{display:flex;align-items:center;gap:12px;justify-content:center;margin:10px 0}  
.file-btn{background:linear-gradient(90deg,var(--accent),var(--accent2));padding:10px 18px;border-radius:10px;border:none;color:#08102a;font-weight:700;cursor:pointer;box-shadow:0 8px 30px rgba(102,123,255,0.25)}  
.file-name{color:var(--muted);font-size:13px;overflow:hidden;text-overflow:ellipsis;max-width:60%}  
.enhance-btn,.download-btn{width:92%;max-width:520px;background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;color:#08102a;font-weight:800;padding:16px;border-radius:12px;font-family:'Orbitron',sans-serif;letter-spacing:3px;font-size:18px;cursor:pointer;box-shadow:0 12px 40px rgba(102,123,255,0.25);transition:transform .12s;margin-top:12px}  
.enhance-btn:active,.download-btn:active{transform:translateY(2px) scale(.98)}  
.section-title{margin-top:20px;font-size:18px;color:var(--accent)}  
.preview-card{width:100%;border-radius:12px;padding:10px;background:rgba(255,255,255,0.03);margin-top:8px}  
.preview-canvas{width:100%;height:auto;border-radius:10px;display:block;background:#020214}  
.footer{margin:20px 0;color:var(--muted);font-size:13px}  
.loading{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(1,4,10,0.7);backdrop-filter:blur(6px);visibility:hidden;opacity:0;transition:opacity .18s,visibility .18s;z-index:9998}  
.loading.show{visibility:visible;opacity:1}  
.loader{padding:18px 24px;border-radius:12px;text-align:center;background:rgba(255,255,255,0.05);box-shadow:0 0 20px rgba(100,120,255,0.2)}  
.loader .title{color:var(--accent);font-weight:700;margin-bottom:6px}  
.hidden{display:none !important}  
</style>  
</head>  
<body>  
<div class="intro" id="intro"><div>KYYS ü§ç ELIN</div></div>  

<!-- ‚úÖ Audio langsung dari file sejajar index.html -->
<audio id="bgMusic" autoplay>
  <source src="intro.mp3" type="audio/mpeg">
</audio>

<div class="container hidden" id="mainContent">  
  <div class="topbar">KYYS ü§ç ELIN</div>  
  <div class="card">  
    <div class="label">URL Gambar</div>  
    <input id="urlInput" class="input-url" placeholder="https://example.com/image.jpg" />  
    <div class="label">Upload Gambar / Video</div>  
    <div class="upload-row">  
      <label class="file-btn" for="fileInput">Pilih File</label>  
      <input id="fileInput" type="file" accept="image/*,video/*" style="display:none">  
      <div class="file-name" id="fileName">Tidak ada file</div>  
    </div>  
    <button id="enhanceBtn" class="enhance-btn">ENHANCE</button>  
    <button id="downloadBtn" class="download-btn hidden">DOWNLOAD</button>  
  </div>  
  <div class="section-title">BEFORE</div>  
  <div class="preview-card"><canvas id="previewBefore" class="preview-canvas"></canvas></div>  
  <div class="section-title">AFTER</div>  
  <div class="preview-card"><canvas id="previewAfter" class="preview-canvas"></canvas></div>  
  <div class="footer">Made with ü§ç by <strong>KYYS</strong></div>  
</div>  

<div class="loading" id="loading"><div class="loader"><div class="title">Sabar yaa bubb ü§ç</div><div>sedang di-HD-in oleh <strong>KYYS</strong>...</div></div></div>  

<script>  
window.addEventListener('load', () => {  
  const intro = document.getElementById('intro');  
  const main = document.getElementById('mainContent');  
  const music = document.getElementById('bgMusic');  
  music.loop = false;  
  music.play().catch(()=>{});  
  music.addEventListener('ended', () => {  
    music.currentTime = 0;  
    music.play().catch(()=>{});  
  });  
  setTimeout(() => {  
    intro.classList.add('hide');  
    setTimeout(() => {  
      intro.remove();  
      main.classList.remove('hidden');  
    }, 800);  
  }, 3000);  
  document.addEventListener('click', function oncePlay(){  
    music.play().catch(()=>{});  
    document.removeEventListener('click', oncePlay);  
  });  
});  

const fileInput=document.getElementById('fileInput');  
const fileName=document.getElementById('fileName');  
const urlInput=document.getElementById('urlInput');  
const enhanceBtn=document.getElementById('enhanceBtn');  
const downloadBtn=document.getElementById('downloadBtn');  
const previewBefore=document.getElementById('previewBefore');  
const previewAfter=document.getElementById('previewAfter');  
const loading=document.getElementById('loading');  
const beforeCtx=previewBefore.getContext('2d');  
const afterCtx=previewAfter.getContext('2d');  
let currentFile=null,currentBlobUrl=null,resultBlob=null;  

fileInput.addEventListener('change',e=>{  
  const f=e.target.files[0];  
  if(!f)return;  
  currentFile=f;  
  fileName.textContent=f.name;  
  if(currentBlobUrl)URL.revokeObjectURL(currentBlobUrl);  
  currentBlobUrl=URL.createObjectURL(f);  
  renderBefore(currentBlobUrl);  
});  

urlInput.addEventListener('keydown',e=>{  
  if(e.key==='Enter')loadFromUrl(urlInput.value.trim());  
});  

async function loadFromUrl(url){  
  if(!url)return;  
  try{  
    loading.classList.add('show');  
    const resp=await fetch(url);  
    const blob=await resp.blob();  
    const f=new File([blob],'remote',{type:blob.type});  
    currentFile=f;  
    fileName.textContent=f.name;  
    if(currentBlobUrl)URL.revokeObjectURL(currentBlobUrl);  
    currentBlobUrl=URL.createObjectURL(f);  
    renderBefore(currentBlobUrl);  
  }catch(err){alert('Gagal load URL');}  
  finally{loading.classList.remove('show');}  
}  

function renderBefore(src){  
  const img=new Image();  
  img.onload=()=>{  
    const ratio=img.naturalWidth/img.naturalHeight;  
    previewBefore.width=ratio>1?720:360;  
    previewBefore.height=ratio>1?360:720;  
    beforeCtx.fillStyle='#0a0a12';  
    beforeCtx.fillRect(0,0,previewBefore.width,previewBefore.height);  
    const scale=Math.min(previewBefore.width/img.naturalWidth,previewBefore.height/img.naturalHeight);  
    const w=img.naturalWidth*scale,h=img.naturalHeight*scale;  
    const x=(previewBefore.width-w)/2,y=(previewBefore.height-h)/2;  
    beforeCtx.drawImage(img,x,y,w,h);  
  };  
  img.onerror = ()=>{};  
  img.src=src;  
}  

enhanceBtn.addEventListener('click',async()=>{  
  if(!currentFile){alert('Pilih file dulu');return;}  
  loading.classList.add('show');  
  downloadBtn.classList.add('hidden');  
  resultBlob=null;  
  try{  
    if(currentFile.type.startsWith('image/'))await processImage(currentBlobUrl);  
    else await processVideo(currentBlobUrl);  
    downloadBtn.classList.remove('hidden');  
  }catch(err){alert('Gagal: '+err.message);}  
  finally{loading.classList.remove('show');}  
});  

function create4KCanvas(){const c=document.createElement('canvas');c.width=3840;c.height=2160;return c;}  

function adjustPreview(off){  
  const ratio=off.width/off.height;  
  previewAfter.width=ratio>1?720:360;  
  previewAfter.height=ratio>1?360:720;  
  afterCtx.clearRect(0,0,previewAfter.width,previewAfter.height);  
  const scale=Math.min(previewAfter.width/off.width,previewAfter.height/off.height);  
  const w=off.width*scale,h=off.height*scale;  
  const x=(previewAfter.width-w)/2,y=(previewAfter.height-h)/2;  
  afterCtx.drawImage(off,x,y,w,h);  
}  

async function processImage(src){  
  return new Promise((res,rej)=>{  
    const img=new Image();  
    img.onload=()=>{  
      const off=create4KCanvas();  
      const ctx=off.getContext('2d');  
      ctx.fillStyle='#000';ctx.fillRect(0,0,off.width,off.height);  
      const scale=Math.min(off.width/img.naturalWidth,off.height/img.naturalHeight);  
      const w=img.naturalWidth*scale,h=img.naturalHeight*scale;  
      const x=(off.width-w)/2,y=(off.height-h)/2;  
      ctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality='high';  
      ctx.drawImage(img,x,y,w,h);  
      adjustPreview(off);  
      off.toBlob(b=>{resultBlob=b;res();},'image/png');  
    };  
    img.onerror=()=>rej(new Error('Gagal gambar'));  
    img.src=src;  
  });  
}  

async function processVideo(src){  
  return new Promise((res,rej)=>{  
    const v=document.createElement('video');  
    v.src=src;v.muted=true;v.playsInline=true;  
    v.addEventListener('loadeddata',()=>{  
      const off=create4KCanvas();  
      const ctx=off.getContext('2d');  
      ctx.drawImage(v,0,0,off.width,off.height);  
      adjustPreview(off);  
      off.toBlob(b=>{resultBlob=b;res();},'image/png');  
    });  
    v.onerror=()=>rej(new Error('Video gagal'));  
  });  
}  

downloadBtn.addEventListener('click',()=>{  
  if(!resultBlob){alert('Belum ada hasil');return;}  
  const a=document.createElement('a');  
  const url=URL.createObjectURL(resultBlob);  
  a.href=url;a.download='kyys_love_elin_result.png';a.click();  
  setTimeout(()=>URL.revokeObjectURL(url),2000);  
});  
</script>  
</body>  
</html>
